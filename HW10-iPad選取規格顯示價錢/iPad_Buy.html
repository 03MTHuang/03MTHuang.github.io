<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <title>iPad_Buy</title>
    <style>
        .shop {
            width: 95%;
        }
        .display-img img {
            top: 2rem;
        }
        label {
            cursor: pointer;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 7px;
        }
        .color-img {
            width: 15%;
        }
        label:hover {
            border-color: #aaa;
        }
        input:checked + .color-label,
        input:checked + .storage-label,
        input:checked + .network-label {
            border: 2px solid #0071e3;
            padding: 23px 14px;
        }
        .text p {
            font-weight: bolder;
            margin-top: 15px;
        }
        .color-label span {
            font-size: 10px;
            color: rgb(110, 110, 110);
        }
        .color-label,
        .storage-label,
        .network-label {
            width: 49%;
            padding: 24px 15px;
        }
        .continue {
            background-color: #fbfbfd;
            text-align: center;
        }
        .shopbag {
            transition: none;
            padding: 4px 60px;
        }
        .cover {
            height: calc(100% + 1px);
            opacity: .5;
        }
        @media screen and (min-width:992px){
            .shop {
                width: 75%;
            }
            .continue {
                text-align: left;
            }
        }
    </style>
  </head>
  <body>
 


    <div class="shop container">
        <h1 class="mt-5 mb-3 text-center d-md-none">購買 iPad Air</h1>
        <div class="row">
            <div class="display-img col-12 col-md-6">
                <img src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-202009?wid=886&hei=1070&fmt=jpeg&qlt=80&.v=1599066777000" alt="" class="w-100 position-sticky">
            </div>
            <div class="text col-12 col-md-6">
                <h1 class="mt-5 mb-5 d-none d-md-block">購買 iPad Air</h1>
                <div class="choose-looks pb-4 mb-4 border-bottom position-relative">
                    <p>外觀</p>
                    <div class="d-flex justify-content-between flex-wrap">
                        <input type="radio" id="gray" name="color" class="d-none">
                        <label for="gray" class="color-label text-center mb-2">
                            <div class="text-center mb-1">
                                <img src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-spacegray-201903?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1552422652805" alt="" class="color-img">
                            </div>
                            <span>太空灰色</span>
                        </label>
                        <input type="radio" id="silver" name="color" class="d-none">
                        <label for="silver" class="color-label text-center mb-2">
                            <div class="text-center mb-1">
                                <img src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-silver-201903?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1552422655664" alt="" class="color-img">
                            </div>
                            <span>銀色</span>
                        </label>
                        <input type="radio" id="rose" name="color" class="d-none">
                        <label for="rose" class="color-label text-center mb-2">
                            <div class="text-center mb-1">
                                <img src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-gold-202009?wid=204&amp;hei=204&amp;fmt=jpeg&amp;qlt=80&amp;.v=1599240136000" alt="" class="color-img">
                            </div>
                            <span>玫瑰金色</span>
                        </label>
                        <input type="radio" id="green" name="color" class="d-none">
                        <label for="green" class="color-label text-center mb-2">
                            <div class="text-center mb-1">
                                <img src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-green-202009?wid=204&amp;hei=204&amp;fmt=jpeg&amp;qlt=80&amp;.v=1599240136000" alt="" class="color-img">
                            </div>
                            <span>綠色</span>
                        </label>
                        <input type="radio" id="blue" name="color" class="d-none">
                        <label for="blue" class="color-label text-center mb-2">
                            <div class="text-center mb-1">
                                <img src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-blue-202009?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1599240136000" alt="" class="color-img">
                            </div>
                            <span>天藍色</span>
                        </label>
                    </div>
                </div>
                <div class="choose-storage pb-4 mb-4 border-bottom position-relative">
                    <div class="cover position-absolute top-0 start-0 w-100 bg-white"></div>
                    <p>儲存裝置</p>
                    <div class="d-flex justify-content-between flex-wrap">
                        <input type="radio" id="GB64" name="storage" class="d-none">
                        <label for="GB64" class="storage-label mb-2 text-center">
                            <span class="d-block text-center fs-4 fw-bolder">64<span class="fs-6">GB</span></span>
                        </label>
                        <input type="radio" id="GB256" name="storage" class="d-none">
                        <label for="GB256" class="storage-label mb-2 text-center">
                            <span class="d-block text-center fs-4 fw-bolder">256<span class="fs-6">GB</span></span>
                        </label>
                    </div>
                </div>
                <div class="choose-network pb-4 mb-4 position-relative">
                    <div class="cover position-absolute top-0 start-0 w-100 bg-white"></div>
                    <p>連線能力</p>
                    <div class="d-flex justify-content-between flex-wrap">
                        <input type="radio" id="Wi-Fi" name="network" class="d-none">
                        <label for="Wi-Fi" class="network-label mb-2 text-center">
                            <span class="d-block text-center fs-6 fw-bolder">Wi-Fi</span>
                        </label>
                        <input type="radio" id="Cellular" name="network" class="d-none">
                        <label for="Cellular" class="network-label mb-2 text-center">
                            <span class="d-block text-center fs-6 fw-bolder">Wi-Fi + 行動網路</span>
                        </label>
                    </div>
                </div>
                <div class="continue p-4 position-relative">
                    <div class="cover position-absolute top-0 start-0 w-100 bg-white"></div>
                    <span class="d-block display-price fs-2 fw-bolder mb-3"></span>
                    <button type="button" class="btn btn-primary fw-bolder shopbag">加入購物車</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let phone_img = document.querySelector(".display-img img");
        let gray = document.querySelector("#gray");
        let silver = document.querySelector("#silver");
        let rose = document.querySelector("#rose");
        let green = document.querySelector("#green");
        let blue = document.querySelector("#blue");
        let color_array = [gray, silver, rose, green, blue];
        let GB64 = document.querySelector("#GB64");
        let GB256 = document.querySelector("#GB256");
        let wifi = document.querySelector("#Wi-Fi");
        let cellular = document.querySelector("#Cellular");
        let show_price = document.querySelector(".display-price");
        let cover = document.querySelectorAll(".cover");
        let _color, _storage, _network;

        const url = "https://raw.githubusercontent.com/03MTHuang/FileStorage/main/iPadAir.json";

        let xhr = new XMLHttpRequest();
        xhr.onload = function(){
            let iPadAir = this.response;

            function changePhoneImg(_color){
                let obj = iPadAir.find(item=>item.color == _color)
                phone_img.setAttribute("src", obj.picture);
            }
            
            //太空灰色
            gray.addEventListener("click", function(){
                _color = "gray";
            })
            //銀色
            silver.addEventListener("click", function(){
                _color = "silver";
            })
            //玫瑰金色
            rose.addEventListener("click", function(){
                _color = "rose";
            })
            //綠色
            green.addEventListener("click", function(){
                _color = "green";
            })
            //天藍色
            blue.addEventListener("click", function(){
                _color = "blue";
            })
            color_array.forEach(item=>{
                item.addEventListener("click", function(){
                    changePhoneImg(_color);
                    cover[0].remove();
                    showPrice();
                })
            })

            //容量64GB
            GB64.addEventListener("click", function(){
                _storage = "64GB";
                cover[1].remove();
                showPrice();
            })
            //容量256GB
            GB256.addEventListener("click", function(){
                _storage = "256GB";
                cover[1].remove();
                showPrice();
            })
            
            //Wi-Fi
            wifi.addEventListener("click", function(){
                _network = "Wi-Fi";
                cover[2].remove();
                showPrice();
            })
            //Cellular
            cellular.addEventListener("click", function(){
                _network = "Cellular";
                cover[2].remove();
                showPrice();
            })

            function showPrice(){
                if(typeof _color != "undefined" && typeof _storage != "undefined" && typeof _network != "undefined"){
                    let obj = iPadAir.filter(item => item.color == _color && item.storage == _storage && item.network == _network)[0]
                    show_price.innerText = `NT$${toCur(obj.price)}`;
                }
            }

            function toCur(num){
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            }
        }
        xhr.responseType = "json";
        xhr.open("GET", url);
        xhr.send();
        
        
        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

  </body>
</html>